apiVersion: v1
kind: ConfigMap
metadata:
  name: granafa-dashboard-conf
  labels:
    name: granafa-dashboard-conf
  namespace: monitoring
data:
  dashboard.yml: |-
    apiVersion: 1
    providers:
    - name: 'Prometheus'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      editable: true
      options:
        path: /etc/grafana/provisioning/dashboards

  kubernetes-kafka.json: |-
    { "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "datasource", "uid": "grafana" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" }, "type": "dashboard" } ] }, "description": "Global Kafka dashboard running on Kubernetes", "editable": true, "fiscalYearStartMonth": 0, "gnetId": 10123, "graphTooltip": 0, "id": 21, "iteration": 1652702718774, "links": [], "liveNow": false, "panels": [ { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 10, "panels": [], "title": "General", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "0": { "text": "DOWN" }, "1": { "text": "UP" } }, "type": "value" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "#299c46", "value": 1 }, { "color": "#d44a3a", "value": 2 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 0, "y": 1 }, "id": 28, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "/^Value$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(up{namespace=\"$namespace\", pod=~\"kafka-[0-9]\"}) / 4", "format": "time_series", "hide": false, "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Cluster status", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 4, "y": 1 }, "id": 2, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "/^__name__$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "kafka_brokers{namespace=\"$namespace\"}", "format": "time_series", "instant": false, "intervalFactor": 1, "refId": "A" } ], "title": "Number of brokers", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "from": -9999999999, "result": { "text": "KO" }, "to": 0 }, "type": "range" }, { "options": { "from": 1, "result": { "text": "OK" }, "to": 1 }, "type": "range" }, { "options": { "from": 2, "result": { "text": "KO" }, "to": 9999999999 }, "type": "range" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "#299c46", "value": 1 }, { "color": "#d44a3a", "value": 2 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 8, "y": 1 }, "id": 60, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(kafka_controller_kafkacontroller_activecontrollercount_value{namespace=\"$namespace\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Active controller status", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 0 }, { "color": "#299c46", "value": 0 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 12, "y": 1 }, "id": 63, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "- sum(kafka_server_replicamanager_total_isrshrinkspersec_count{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "In-sync replicas shrinks", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#299c46", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 1 }, { "color": "#d44a3a", "value": 1 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 1 }, "id": 6, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(kafka_topic_partition_under_replicated_partition{namespace=\"$namespace\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Under replicated partitions", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" }, "mappings": [ { "options": { "match": "null", "result": { "text": "INVALID BROKER" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 20, "y": 1 }, "id": 30, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "kafka_server_replicamanager_total_partitioncount_value{namespace=\"$namespace\", pod=\"$broker\"}", "format": "time_series", "instant": false, "intervalFactor": 1, "refId": "A" } ], "title": "Partition count", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "0": { "text": "DOWN" }, "1": { "text": "UP" } }, "type": "value" }, { "options": { "match": "null", "result": { "text": "INVALID BROKER" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 1 }, { "color": "#299c46", "value": 1 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 0, "y": 4 }, "id": 27, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "/^Value$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "up{namespace=\"$namespace\", pod=\"$broker\"}", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Broker status", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "from": 0, "result": { "text": "OK" }, "to": 0 }, "type": "range" }, { "options": { "from": 1, "result": { "text": "KO" }, "to": 9999999999 }, "type": "range" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#299c46", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 1 }, { "color": "#d44a3a", "value": 1 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 4, "y": 4 }, "id": 20, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "/^Value$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(kafka_controller_controllerstats_uncleanleaderelectionspersec_count{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Unclean leader election", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 8, "y": 4 }, "id": 4, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "mean" ], "fields": "/^pod$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "kafka_controller_kafkacontroller_activecontrollercount_value{namespace=\"$namespace\"} == 1", "format": "table", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Active controller", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 0 }, { "color": "#299c46", "value": 0 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 12, "y": 4 }, "id": 64, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "- sum(kafka_server_replicamanager_total_isrexpandspersec_count{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "In-sync replicas expands", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#299c46", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 1 }, { "color": "#d44a3a", "value": 1 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 4 }, "id": 12, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "/^Value$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(kafka_controller_kafkacontroller_offlinepartitionscount_value{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Offline partitions count", "type": "stat" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 7 }, "hiddenSeries": false, "id": 16, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_server_brokertopicmetrics_total_bytesinpersec_count{namespace=\"$namespace\", pod=~\"$broker\"} / kafka_server_brokertopicmetrics_total_bytesoutpersec_count{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 1, "legendFormat": "Broker {{ pod }}", "refId": "A" } ], "thresholds": [], "timeRegions": [], "title": "Bytes rate", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 7 }, "hiddenSeries": false, "id": 14, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_server_brokertopicmetrics_total_messagesinpersec_oneminuterate{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "instant": false, "intervalFactor": 1, "legendFormat": "{{ pod }} {{ value }}", "refId": "A" } ], "thresholds": [], "timeRegions": [], "title": "Messages IN", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "ops", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": true, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 7 }, "hiddenSeries": false, "id": 22, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": false, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_server_replicamanager_total_partitioncount_value{namespace=\"$namespace\"}", "format": "time_series", "instant": true, "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [], "timeRegions": [], "title": "Number of partitions", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "series", "show": true, "values": [ "current" ] }, "yaxes": [ { "format": "short", "logBase": 1, "min": "0", "show": true }, { "format": "short", "logBase": 1, "show": false } ], "yaxis": { "align": false, "alignLevel": 0 } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 14 }, "hiddenSeries": false, "id": 55, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "rate(kafka_server_brokertopicmetrics_total_bytesinpersec_count{namespace=\"$namespace\", pod=~\"$broker\"}[5m])", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [], "timeRegions": [], "title": "Bytes IN", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 14 }, "hiddenSeries": false, "id": 56, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "rate(kafka_server_brokertopicmetrics_total_bytesoutpersec_count{namespace=\"$namespace\", pod=~\"$broker\"}[5m])", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 1, "legendFormat": "Broker {{ pod }}", "refId": "A" } ], "thresholds": [], "timeRegions": [], "title": "Bytes OUT", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 14 }, "hiddenSeries": false, "id": 66, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "- kafka_server_replicamanager_total_isrshrinkspersec_count{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" }, { "expr": "- kafka_server_replicamanager_total_isrexpandspersec_count{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": true, "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "B" } ], "thresholds": [], "timeRegions": [], "title": "In-sync replicas", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": "0", "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 21 }, "id": 38, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 22 }, "id": 34, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "jvm_memory_bytes_used{namespace=\"$namespace\", pod=~\"$broker\", area=\"heap\"}", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 5, "legendFormat": "used {{ pod }}", "refId": "A" }, { "expr": "jvm_memory_bytes_max{namespace=\"$namespace\", pod=~\"$broker\", area=\"heap\"}", "format": "time_series", "instant": false, "intervalFactor": 5, "legendFormat": "max {{ pod }}", "refId": "B" } ], "thresholds": [], "title": "JVM memory", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "decbytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 22 }, "id": 40, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "java_lang_operatingsystem_systemcpuload{namespace=\"$namespace\", pod=~\"$broker\"} * 100", "format": "time_series", "hide": false, "intervalFactor": 4, "legendFormat": "system {{ pod }}", "refId": "A" }, { "expr": "java_lang_operatingsystem_processcpuload{namespace=\"$namespace\", pod=~\"$broker\"} * 100", "format": "time_series", "hide": false, "intervalFactor": 4, "legendFormat": "process {{ pod }}", "refId": "B" } ], "thresholds": [], "title": "CPU load", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "percent", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 22 }, "id": 36, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum(rate(jvm_gc_collection_seconds_sum{namespace=\"$namespace\", pod=~\"$broker\"}[5m])) without(gc)", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{ pod }}", "refId": "A" }, { "expr": "sum(rate(jvm_gc_collection_seconds_count{namespace=\"$namespace\", pod=~\"$broker\"}[5m])) without(gc)", "format": "time_series", "hide": true, "intervalFactor": 2, "legendFormat": "{{ pod }}", "refId": "B" } ], "thresholds": [], "title": "Garbage collection", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "% time in GC", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 29 }, "id": 46, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "java_lang_operatingsystem_systemloadaverage{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "instant": false, "intervalFactor": 1, "legendFormat": "System load average", "refId": "A" }, { "expr": "java_lang_operatingsystem_availableprocessors{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Available Processors", "refId": "B" } ], "thresholds": [], "title": "System load", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 29 }, "id": 48, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "java_lang_operatingsystem_openfiledescriptorcount{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [], "title": "Open file descriptor", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 29 }, "id": 54, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "java_lang_operatingsystem_totalphysicalmemorysize{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Total memory {{ pod }}", "refId": "A" }, { "expr": "java_lang_operatingsystem_freephysicalmemorysize{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "legendFormat": "Free memory {{ pod }}", "refId": "B" }, { "expr": "java_lang_operatingsystem_totalswapspacesize{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "legendFormat": "Total SWAP {{ pod }}", "refId": "C" }, { "expr": "java_lang_operatingsystem_freeswapspacesize{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "legendFormat": "Free SWAP {{ pod }}", "refId": "D" }, { "expr": "java_lang_operatingsystem_committedvirtualmemorysize{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "legendFormat": "Committed virtual memory {{ pod }}", "refId": "E" } ], "thresholds": [], "title": "System memory", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "decbytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 36 }, "id": 50, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "jvm_classes_loaded{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Loaded {{ pod }}", "refId": "A" }, { "expr": "jvm_classes_loaded_total{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Total loaded {{ pod }}", "refId": "B" }, { "expr": "jvm_classes_loaded_total{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Unloaded {{ pod }}", "refId": "C" }, { "expr": "delta(jvm_classes_loaded{namespace=\"$namespace\", pod=~\"$broker\"}[5m])", "format": "time_series", "intervalFactor": 1, "legendFormat": "Delta {{ pod }}", "refId": "D" } ], "thresholds": [], "title": "Class loading", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 36 }, "id": 52, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "jvm_threads_current{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Current {{ pod }}", "refId": "A" }, { "expr": "jvm_threads_daemon{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Daemon {{ pod }}", "refId": "B" }, { "expr": "jvm_threads_deadlocked{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Deadlock {{ pod }}", "refId": "C" }, { "expr": "jvm_threads_peak{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Peak {{ pod }}", "refId": "D" }, { "expr": "jvm_threads_started_total{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Started total {{ pod }}", "refId": "E" } ], "thresholds": [], "title": "Threads", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 0, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "decbytes" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 36 }, "id": 44, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(java_lang_operatingsystem_totalphysicalmemorysize{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Total memory", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 20, "y": 36 }, "id": 42, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(java_lang_operatingsystem_availableprocessors{namespace=\"$namespace\", pod=~\"$broker\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Total CPUs", "type": "stat" } ], "title": "JVM", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 22 }, "id": 73, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 23 }, "id": 61, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_network_requestmetrics_requestspersec_count{namespace=\"$namespace\", pod=~\"$broker\", request=\"Produce, version=6\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }} produce", "refId": "A" }, { "expr": "kafka_network_requestmetrics_requestspersec_count{namespace=\"$namespace\", pod=~\"$broker\", request=\"FetchConsumer, version=8\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }} fetch consumer", "refId": "B" }, { "expr": "kafka_network_requestmetrics_requestspersec_count{namespace=\"$namespace\", pod=~\"$broker\", request=\"FetchFollower, version=8\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }} fetch follower", "refId": "C" } ], "thresholds": [], "title": "Number of requests", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "reqps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 23 }, "id": 75, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_server_delayedoperationpurgatory_numdelayedoperations_fetch_value{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "intervalFactor": 4, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [], "title": "Purgatory delayed fetch operations", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 23 }, "id": 71, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (kafka_log_log_size{namespace=\"$namespace\"}) by(pod)", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [], "title": "Log size by broker", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "decbytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 30 }, "id": 18, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum(kafka_network_requestmetrics_requestspersec_count{namespace=\"$namespace\", pod=~\"$broker\"}) by (request)", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ request }}", "refId": "A" } ], "thresholds": [], "title": "All number of requests", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "reqps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "description": "The average fraction of time the network processors are idle", "fill": 0, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 30 }, "id": 68, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_network_processor_idlepercent_value{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 1, "legendFormat": "{{ pod }} network processor {{ network_processor }}", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "lt", "value": 0.3, "yaxis": "left" } ], "title": "Idle network processors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "min": "0", "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": true } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "description": "The average fraction of time the request handler threads are idle", "fill": 0, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 30 }, "id": 69, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "kafka_server_kafkarequesthandlerpool_total_requesthandleravgidlepercent_oneminuterate{namespace=\"$namespace\", pod=~\"$broker\"}", "format": "time_series", "hide": false, "instant": false, "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "lt", "value": 0.3, "yaxis": "left" } ], "title": "Idle request handler threads", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "min": "0", "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": true } } ], "title": "Details", "type": "row" }, { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 23 }, "id": 24, "panels": [], "title": "Zookeeper", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#d44a3a", "value": null }, { "color": "#299c46", "value": 3 }, { "color": "#d44a3a", "value": 4 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 0, "y": 24 }, "id": 77, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(cp_zookeeper_quorumsize{namespace=\"$namespace\"}) / 3", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Quorum", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 4, "y": 24 }, "id": 79, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "mean" ], "fields": "/^pod$/", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "cp_zookeeper_ticktime{namespace=\"$namespace\", membertype=\"Leader\"}", "format": "table", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Leader", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "#299c46", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 1 }, { "color": "#d44a3a", "value": 10 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 8, "y": 24 }, "id": 91, "links": [], "maxDataPoints": 100, "options": { "colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(cp_zookeeper_outstandingrequests{namespace=\"$namespace\", pod=~\"$zookeeper\"})", "format": "time_series", "instant": true, "intervalFactor": 1, "refId": "A" } ], "title": "Outstanding requests", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 24 }, "id": 81, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "cp_zookeeper_inmemorydatatree_nodecount{namespace=\"$namespace\", membertype=\"Leader\"}", "format": "time_series", "intervalFactor": 1, "refId": "A" } ], "title": "ZNodes count", "type": "stat" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 20, "y": 24 }, "id": 83, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum(cp_zookeeper_inmemorydatatree_watchcount{namespace=\"$namespace\", pod=~\"$zookeeper\"})", "format": "time_series", "intervalFactor": 1, "refId": "A" } ], "title": "Watch count", "type": "stat" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 27 }, "id": 85, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "cp_zookeeper_avgrequestlatency{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Average {{ pod }}", "refId": "A" }, { "expr": "cp_zookeeper_maxrequestlatency{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Max {{ pod }}", "refId": "B" }, { "expr": "cp_zookeeper_minrequestlatency{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Min {{ pod }}", "refId": "C" } ], "thresholds": [], "title": "Requests latency", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "ms", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 27 }, "id": 87, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "cp_zookeeper_outstandingrequests{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{ pod }}", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "gt", "value": 10, "yaxis": "left" } ], "title": "Outstanding requests", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": "12", "min": "0", "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "uid": "$datasource" }, "fill": 1, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 27 }, "id": 89, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "cp_zookeeper_packetsreceived{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Received {{ pod }}", "refId": "A" }, { "expr": "cp_zookeeper_packetssent{namespace=\"$namespace\", pod=~\"$zookeeper\"}", "format": "time_series", "intervalFactor": 1, "legendFormat": "Sent {{ pod }}", "refId": "B" } ], "thresholds": [], "title": "Packets", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } } ], "refresh": false, "schemaVersion": 36, "style": "dark", "tags": [], "templating": { "list": [ { "current": { "selected": false, "text": "prometheusdata", "value": "prometheusdata" }, "hide": 0, "includeAll": false, "multi": false, "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "skipUrlSync": false, "type": "datasource" }, { "current": { "isNone": true, "selected": false, "text": "None", "value": "" }, "datasource": { "uid": "$datasource" }, "definition": "", "hide": 0, "includeAll": false, "multi": false, "name": "namespace", "options": [], "query": { "query": "label_values(kafka_controller_kafkacontroller_activecontrollercount_value, namespace)", "refId": "prometheusdata-namespace-Variable-Query" }, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tagsQuery": "", "type": "query", "useTags": false }, { "allValue": "kafka-[0-9]", "current": { "selected": false, "text": "All", "value": "$__all" }, "datasource": { "uid": "$datasource" }, "definition": "", "hide": 0, "includeAll": true, "multi": false, "name": "broker", "options": [], "query": { "query": "label_values(kafka_controller_kafkacontroller_activecontrollercount_value{namespace=\"$namespace\"}, pod)", "refId": "prometheusdata-broker-Variable-Query" }, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tagsQuery": "", "type": "query", "useTags": false }, { "allValue": "zookeeper-[0-9]", "current": { "selected": false, "text": "All", "value": "$__all" }, "datasource": { "uid": "$datasource" }, "definition": "", "hide": 0, "includeAll": true, "multi": false, "name": "zookeeper", "options": [], "query": { "query": "label_values(cp_zookeeper_tick{namespace=\"$namespace\"}, pod)", "refId": "prometheusdata-zookeeper-Variable-Query" }, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tagsQuery": "", "type": "query", "useTags": false } ] }, "time": { "from": "now-12h", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "", "title": "Kubernetes Kafka", "uid": "kafka", "version": 1, "weekStart": "" }

  kubernetes-node.json: |-
    { "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "datasource", "uid": "grafana" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" }, "type": "dashboard" } ] }, "description": "Kubernetes Nodes for node exporter 0.16+ (via Prometheus)\r\n", "editable": true, "fiscalYearStartMonth": 0, "gnetId": 8171, "graphTooltip": 0, "id": 22, "iteration": 1652706313463, "links": [], "liveNow": false, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 0 }, "hiddenSeries": false, "id": 3, "isNew": false, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "100 - (avg by (cpu) (irate(node_cpu_seconds_total{mode=\"idle\", instance=\"$server\"}[5m])) * 100)", "format": "time_series", "hide": false, "intervalFactor": 10, "legendFormat": "{{cpu}}", "refId": "A", "step": 50 } ], "thresholds": [], "timeRegions": [], "title": "Idle CPU", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "percent", "label": "cpu usage", "logBase": 1, "max": 100, "min": 0, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 0 }, "hiddenSeries": false, "id": 9, "isNew": false, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_load1{instance=\"$server\"}", "intervalFactor": 4, "legendFormat": "load 1m", "refId": "A", "step": 20, "target": "" }, { "expr": "node_load5{instance=\"$server\"}", "intervalFactor": 4, "legendFormat": "load 5m", "refId": "B", "step": 20, "target": "" }, { "expr": "node_load15{instance=\"$server\"}", "intervalFactor": 4, "legendFormat": "load 15m", "refId": "C", "step": 20, "target": "" } ], "thresholds": [], "timeRegions": [], "title": "System Load", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "percentunit", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 18, "x": 0, "y": 7 }, "hiddenSeries": false, "id": 4, "isNew": false, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "node_memory_SwapFree{instance=\"172.17.0.1:9100\",job=\"prometheus\"}", "yaxis": 2 } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_MemTotal_bytes{instance=\"$server\"} - node_memory_MemFree_bytes{instance=\"$server\"} - node_memory_Buffers_bytes{instance=\"$server\"} - node_memory_Cached_bytes{instance=\"$server\"}", "format": "time_series", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "memory used", "metric": "", "refId": "C", "step": 10 }, { "expr": "node_memory_Buffers_bytes{instance=\"$server\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "memory buffers", "metric": "", "refId": "E", "step": 10 }, { "expr": "node_memory_Cached_bytes{instance=\"$server\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "memory cached", "metric": "", "refId": "F", "step": 10 }, { "expr": "node_memory_MemFree_bytes{instance=\"$server\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "memory free", "metric": "", "refId": "D", "step": 10 } ], "thresholds": [], "timeRegions": [], "title": "Memory Usage", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "min": "0", "show": true }, { "format": "short", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "max": 100, "min": 0, "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 80 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 6, "x": 18, "y": 7 }, "hideTimeOverride": false, "id": 5, "links": [], "maxDataPoints": 100, "options": { "orientation": "horizontal", "reduceOptions": { "calcs": [ "mean" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "expr": "((node_memory_MemTotal_bytes{instance=\"$server\"} - node_memory_MemFree_bytes{instance=\"$server\"} - node_memory_Buffers_bytes{instance=\"$server\"} - node_memory_Cached_bytes{instance=\"$server\"}) / node_memory_MemTotal_bytes{instance=\"$server\"}) * 100", "format": "time_series", "intervalFactor": 2, "refId": "A", "step": 60, "target": "" } ], "title": "Memory Usage", "type": "gauge" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 18, "x": 0, "y": 14 }, "hiddenSeries": false, "id": 6, "isNew": true, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "read", "yaxis": 1 }, { "alias": "{instance=\"172.17.0.1:9100\"}", "yaxis": 2 }, { "alias": "io time", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (instance) (rate(node_nfsd_disk_bytes_read_total{instance=\"$server\"}[2m]))", "format": "time_series", "hide": false, "intervalFactor": 4, "legendFormat": "read", "refId": "A", "step": 20, "target": "" }, { "expr": "sum by (instance) (rate(node_nfsd_disk_bytes_written_total{instance=\"$server\"}[2m]))", "format": "time_series", "intervalFactor": 4, "legendFormat": "written", "refId": "B", "step": 20 }, { "expr": "sum by (instance) (rate(node_disk_io_time_seconds_total{instance=\"$server\"}[2m]))", "format": "time_series", "intervalFactor": 4, "legendFormat": "io time", "refId": "C", "step": 20 } ], "thresholds": [], "timeRegions": [], "title": "Disk I/O", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "ms", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "max": 1, "min": 0, "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 0.75 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 0.9 } ] }, "unit": "percentunit" }, "overrides": [] }, "gridPos": { "h": 7, "w": 6, "x": 18, "y": 14 }, "hideTimeOverride": false, "id": 7, "links": [], "maxDataPoints": 100, "options": { "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "expr": "(sum(node_filesystem_size_bytes{device!=\"rootfs\",instance=\"$server\"}) - sum(node_filesystem_free_bytes{device!=\"rootfs\",instance=\"$server\"})) / sum(node_filesystem_size_bytes{device!=\"rootfs\",instance=\"$server\"})", "format": "time_series", "intervalFactor": 2, "refId": "A", "step": 60, "target": "" } ], "title": "Disk Space Usage", "type": "gauge" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 21 }, "hiddenSeries": false, "id": 8, "isNew": false, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "transmitted", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "rate(node_network_receive_bytes_total{instance=\"$server\",device!~\"lo\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}}", "refId": "A", "step": 10, "target": "" } ], "thresholds": [], "timeRegions": [], "title": "Network Received", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "bytes", "logBase": 1, "show": true } ], "yaxis": { "align": false } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": { "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2Color": "rgba(234, 112, 112, 0.22)" }, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 21 }, "hiddenSeries": false, "id": 10, "isNew": false, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "transmitted", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "rate(node_network_transmit_bytes_total{instance=\"$server\",device!~\"lo\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}}", "refId": "B", "step": 10, "target": "" } ], "thresholds": [], "timeRegions": [], "title": "Network Transmitted", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "bytes", "logBase": 1, "show": true } ], "yaxis": { "align": false } } ], "refresh": false, "schemaVersion": 36, "style": "dark", "tags": [ "nodes", "prometheus" ], "templating": { "list": [ { "current": { "selected": false, "text": "192.168.182.46:9100", "value": "192.168.182.46:9100" }, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "definition": "", "hide": 0, "includeAll": false, "multi": false, "name": "server", "options": [], "query": { "query": "label_values(node_boot_time_seconds, instance)", "refId": "prometheusdata-server-Variable-Query" }, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "tagValuesQuery": "", "tagsQuery": "", "type": "query", "useTags": false } ] }, "time": { "from": "now-1h", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "browser", "title": "Kubernetes Nodes", "uid": "dUMN5x0mk", "version": 1, "weekStart": "" }
  
  kubernetes-cluster.json: |-
    { "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" }, "type": "dashboard" } ] }, "description": "Monitors Kubernetes cluster using Prometheus. Shows overall cluster CPU / Memory / Filesystem usage as well as individual pod, containers, systemd services statistics. Uses cAdvisor metrics only.", "editable": true, "fiscalYearStartMonth": 0, "gnetId": 315, "graphTooltip": 0, "id": 24, "iteration": 1652706807847, "links": [], "liveNow": false, "panels": [ { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 33, "panels": [], "title": "Network I/O pressure", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": {}, "gridPos": { "h": 6, "w": 24, "x": 0, "y": 1 }, "height": "200px", "hiddenSeries": false, "id": 32, "isNew": true, "legend": { "alignAsTable": false, "avg": true, "current": true, "max": false, "min": false, "rightSide": false, "show": false, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[1m]))", "interval": "10s", "intervalFactor": 1, "legendFormat": "Received", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[1m]))", "interval": "10s", "intervalFactor": 1, "legendFormat": "Sent", "metric": "network", "refId": "B", "step": 10 } ], "thresholds": [], "timeRegions": [], "title": "Network I/O pressure", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "Bps", "logBase": 1, "show": false } ], "yaxis": { "align": false } }, { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 7 }, "id": 34, "panels": [], "title": "Total usage", "type": "row" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "max": 100, "min": 0, "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 65 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 5, "w": 8, "x": 0, "y": 8 }, "id": 4, "links": [], "maxDataPoints": 100, "options": { "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"}) * 100", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Cluster memory usage", "type": "gauge" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "max": 100, "min": 0, "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 65 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 5, "w": 8, "x": 8, "y": 8 }, "id": 6, "links": [], "maxDataPoints": 100, "options": { "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Cluster CPU usage (1m avg)", "type": "gauge" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "max": 100, "min": 0, "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 65 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 5, "w": 8, "x": 16, "y": 8 }, "id": 7, "links": [], "maxDataPoints": 100, "options": { "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum (container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) * 100", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 10 } ], "title": "Cluster filesystem usage", "type": "gauge" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "bytes" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 0, "y": 13 }, "id": 9, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Used", "type": "stat" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "bytes" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 4, "y": 13 }, "id": 10, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"})", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Total", "type": "stat" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 8, "y": 13 }, "id": 11, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[1m]))", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Used", "type": "stat" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 12, "y": 13 }, "id": 12, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Total", "type": "stat" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "bytes" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 13 }, "id": 13, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Used", "type": "stat" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "decimals": 2, "mappings": [ { "options": { "match": "null", "result": { "text": "N/A" } }, "type": "special" } ], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "bytes" }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 20, "y": 13 }, "id": 14, "links": [], "maxDataPoints": 100, "options": { "colorMode": "none", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "8.5.2", "targets": [ { "expr": "sum (container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "title": "Total", "type": "stat" }, { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 16 }, "id": 35, "panels": [], "title": "Pods CPU usage", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 3, "editable": true, "error": false, "fill": 0, "fillGradient": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 17 }, "height": "", "hiddenSeries": false, "id": 17, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (pod_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ pod_name }}", "metric": "container_cpu", "refId": "A", "step": 10 } ], "thresholds": [], "timeRegions": [], "title": "Pods CPU usage (1m avg)", "tooltip": { "msResolution": true, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "none", "label": "cores", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ], "yaxis": { "align": false } }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 24 }, "id": 36, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 3, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 24 }, "height": "", "id": 23, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{systemd_service_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (systemd_service_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ systemd_service_name }}", "metric": "container_cpu", "refId": "A", "step": 10 } ], "thresholds": [], "title": "System services CPU usage (1m avg)", "tooltip": { "msResolution": true, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "none", "label": "cores", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "System services CPU usage", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 25 }, "id": 37, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 3, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 25 }, "height": "", "id": 24, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": true, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",container_name!=\"POD\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (container_name, pod_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod_name }} | {{ container_name }}", "metric": "container_cpu", "refId": "A", "step": 10 }, { "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, name, image)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})", "metric": "container_cpu", "refId": "B", "step": 10 }, { "expr": "sum (rate (container_cpu_usage_seconds_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, rkt_container_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}", "metric": "container_cpu", "refId": "C", "step": 10 } ], "thresholds": [], "title": "Containers CPU usage (1m avg)", "tooltip": { "msResolution": true, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "none", "label": "cores", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "Containers CPU usage", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 }, "id": 38, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 3, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 14, "w": 24, "x": 0, "y": 26 }, "id": 20, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (id)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ id }}", "metric": "container_cpu", "refId": "A", "step": 10 } ], "thresholds": [], "title": "All processes CPU usage (1m avg)", "tooltip": { "msResolution": true, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "none", "label": "cores", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "All processes CPU usage", "type": "row" }, { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 27 }, "id": 39, "panels": [], "title": "Pods memory usage", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 0, "fillGradient": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 28 }, "hiddenSeries": false, "id": 25, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}) by (pod_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ pod_name }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "thresholds": [], "timeRegions": [], "title": "Pods memory usage", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ], "yaxis": { "align": false } }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 35 }, "id": 40, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 35 }, "id": 26, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (container_memory_working_set_bytes{systemd_service_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}) by (systemd_service_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ systemd_service_name }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "thresholds": [], "title": "System services memory usage", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "System services memory usage", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 36 }, "id": 41, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 36 }, "id": 27, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",container_name!=\"POD\",kubernetes_io_hostname=~\"^$Node$\"}) by (container_name, pod_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod_name }} | {{ container_name }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 }, { "expr": "sum (container_memory_working_set_bytes{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}) by (kubernetes_io_hostname, name, image)", "interval": "10s", "intervalFactor": 1, "legendFormat": "docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})", "metric": "container_memory_usage:sort_desc", "refId": "B", "step": 10 }, { "expr": "sum (container_memory_working_set_bytes{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}) by (kubernetes_io_hostname, rkt_container_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}", "metric": "container_memory_usage:sort_desc", "refId": "C", "step": 10 } ], "thresholds": [], "title": "Containers memory usage", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "Containers memory usage", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 37 }, "id": 42, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 14, "w": 24, "x": 0, "y": 37 }, "id": 28, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": false, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": true, "targets": [ { "expr": "sum (container_memory_working_set_bytes{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) by (id)", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ id }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "thresholds": [], "title": "All processes memory usage", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "bytes", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "All processes memory usage", "type": "row" }, { "collapsed": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 38 }, "id": 43, "panels": [], "title": "Pods network I/O", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 1, "fillGradient": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 39 }, "hiddenSeries": false, "id": 16, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "options": { "alertThreshold": true }, "percentage": false, "pluginVersion": "8.5.2", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (pod_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "-> {{ pod_name }}", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (pod_name)", "interval": "10s", "intervalFactor": 1, "legendFormat": "<- {{ pod_name }}", "metric": "network", "refId": "B", "step": 10 } ], "thresholds": [], "timeRegions": [], "title": "Pods network I/O (1m avg)", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "mode": "time", "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ], "yaxis": { "align": false } }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 46 }, "id": 44, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 1, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 46 }, "id": 30, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (container_name, pod_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "-> pod: {{ pod_name }} | {{ container_name }}", "metric": "network", "refId": "B", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (container_name, pod_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "<- pod: {{ pod_name }} | {{ container_name }}", "metric": "network", "refId": "D", "step": 10 }, { "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, name, image)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "-> docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, name, image)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "<- docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})", "metric": "network", "refId": "C", "step": 10 }, { "expr": "sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, rkt_container_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "-> rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}", "metric": "network", "refId": "E", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (kubernetes_io_hostname, rkt_container_name)", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "<- rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}", "metric": "network", "refId": "F", "step": 10 } ], "thresholds": [], "title": "Containers network I/O (1m avg)", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "Containers network I/O", "type": "row" }, { "collapsed": true, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 47 }, "id": 45, "panels": [ { "aliasColors": {}, "bars": false, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "decimals": 2, "editable": true, "error": false, "fill": 1, "grid": {}, "gridPos": { "h": 14, "w": 24, "x": 0, "y": 47 }, "id": 29, "isNew": true, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": false, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (id)", "interval": "10s", "intervalFactor": 1, "legendFormat": "-> {{ id }}", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[1m])) by (id)", "interval": "10s", "intervalFactor": 1, "legendFormat": "<- {{ id }}", "metric": "network", "refId": "B", "step": 10 } ], "thresholds": [], "title": "All processes network I/O (1m avg)", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "show": true }, "yaxes": [ { "format": "Bps", "logBase": 1, "show": true }, { "format": "short", "logBase": 1, "show": false } ] } ], "title": "All processes network I/O", "type": "row" } ], "refresh": "10s", "schemaVersion": 36, "style": "dark", "tags": [ "kubernetes" ], "templating": { "list": [ { "allValue": ".*", "current": { "selected": true, "text": "All", "value": "$__all" }, "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "definition": "", "hide": 0, "includeAll": true, "multi": false, "name": "Node", "options": [], "query": { "query": "label_values(kubernetes_io_hostname)", "refId": "prometheusdata-Node-Variable-Query" }, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query" } ] }, "time": { "from": "now-5m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "browser", "title": "Kubernetes cluster monitoring (via Prometheus)", "uid": "RaKvHvu7k", "version": 1, "weekStart": "" }

  kafka.json: |-
    { "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" }, "type": "dashboard" } ] }, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 17, "links": [], "liveNow": false, "panels": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 }, "id": 14, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "promhttp_metric_handler_requests_total{code=\"200\",job=\"kafka-exporter\"}", "refId": "A" } ], "title": "promhttp_metric_handler_requests_total{code=\"200\"}", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 }, "id": 16, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "promhttp_metric_handler_requests_total{code=\"500\", job=\"kafka-exporter\"}", "refId": "A" } ], "title": "promhttp_metric_handler_requests_total{code=\"500\"}", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 8 }, "id": 18, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "promhttp_metric_handler_requests_total{code=\"503\",job=\"kafka-exporter\"}", "refId": "A" } ], "title": "promhttp_metric_handler_requests_total{code=\"503\"}", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 8 }, "id": 2, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "go_memstats_sys_bytes{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "go_memstats_sys_bytes", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 17 }, "id": 8, "options": { "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "process_open_fds{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "process_open_fds", "type": "gauge" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 17 }, "id": 4, "options": { "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "8.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "go_threads{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "go_threads", "type": "gauge" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 25 }, "id": 6, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "process_cpu_seconds_total{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "process_cpu_seconds_total", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 25 }, "id": 10, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "single", "sort": "none" } }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "process_resident_memory_bytes{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "process_resident_memory_bytes", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "fillOpacity": 80, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineWidth": 1, "scaleDistribution": { "type": "linear" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 34 }, "id": 12, "options": { "barRadius": 0, "barWidth": 0.97, "groupWidth": 0.7, "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "orientation": "auto", "showValue": "auto", "stacking": "none", "tooltip": { "mode": "single", "sort": "none" }, "xTickLabelRotation": 0, "xTickLabelSpacing": 0 }, "pluginVersion": "8.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "process_virtual_memory_bytes{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "process_virtual_memory_bytes", "type": "barchart" }, { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "fillOpacity": 80, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineWidth": 1, "scaleDistribution": { "type": "linear" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 34 }, "id": 20, "options": { "barRadius": 0, "barWidth": 0.97, "groupWidth": 0.7, "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" }, "orientation": "auto", "showValue": "auto", "stacking": "none", "tooltip": { "mode": "single", "sort": "none" }, "xTickLabelRotation": 0, "xTickLabelSpacing": 0 }, "targets": [ { "datasource": { "type": "prometheus", "uid": "PE60866158CA1A677" }, "expr": "promhttp_metric_handler_requests_in_flight{job=\"kafka-exporter\"}", "refId": "A" } ], "title": "promhttp_metric_handler_requests_in_flight", "type": "barchart" } ], "schemaVersion": 36, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-6h", "to": "now" }, "timepicker": {}, "timezone": "", "title": "Kafka", "uid": "ayXF9HX7k", "version": 2, "weekStart": "" }
